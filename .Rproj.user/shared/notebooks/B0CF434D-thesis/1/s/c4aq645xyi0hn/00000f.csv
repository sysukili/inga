"0","library(ggplot2)"
"0","library(showtext)"
"0",""
"0","# 启用 showtext 并加载中文字体"
"0","showtext_auto()"
"0","font_add(""SimHei"", ""simhei.ttf"") # 替换为系统中的中文字体路径"
"0",""
"0","# 示例数据"
"0","data <- data.frame("
"0","  Patient = factor(c(""吸烟 1"", ""吸烟 2"", ""吸烟 3"", ""吸烟 4"", ""吸烟 5"", ""不吸烟 1""),"
"0","    levels = rev(c(""病人 1"", ""病人 2"", ""病人 3"", ""病人 4"", ""病人 5"", ""病人 6""))"
"0","  ),"
"0","  Entry = as.Date(rep(""1983-01-01"", 6)), # 所有病人从1983年1月开始"
"0","  Exit = as.Date(c(""1990-05-01"", ""1991-06-15"", ""1989-03-20"", ""1992-07-10"", ""1991-11-30"", ""1992-12-15"")), # 在1992-12-31前结束"
"0","  Event = c(0, 1, 0, 0, 1, 1)"
"0",")"
"0",""
"0","accrual_start <- as.Date(""1983-01-01"")"
"0","accrual_end <- as.Date(""1992-12-31"")"
"0","followup_end <- as.Date(""1992-12-31"")"
"0",""
"0","# 绘图"
"0","ggplot(data, aes(y = Patient)) +"
"0","  geom_segment(aes(x = Entry, xend = Exit, y = Patient, yend = Patient), color = ""black"") +"
"0","  geom_point(aes(x = Entry, y = Patient), shape = 16, size = 3) +"
"0","  geom_point(aes(x = Exit, y = Patient, shape = as.factor(Event)), size = 3) +"
"0","  scale_shape_manual(values = c(1, 4), labels = c(""审查"", ""事件"")) +"
"0","  geom_vline(xintercept = c(accrual_start, followup_end), linetype = ""dashed"", color = ""red"") +"
"0","  scale_x_date("
"0","    limits = c(as.Date(""1983-01-01""), as.Date(""1992-12-31"")), # 设置x轴范围"
"0","    date_labels = ""%Y-%m"", # 设置时间格式为 年-月"
"0","    date_breaks = ""3 year"" # 每年显示一个刻度"
"0","  ) +"
"0","  labs(x = ""入组日期 – 日历时间"", y = """", shape = ""结果"") +"
"0","  theme_minimal() +"
"0","  theme("
"0","    text = element_text(family = ""SimHei"", size = 20), # 全局字体大小"
"0","    axis.text = element_text(size = 20),              # 坐标轴刻度字体大小"
"0","    axis.title = element_text(size = 20),             # 坐标轴标题字体大小"
"0","    legend.text = element_text(size = 20),            # 图例文字字体大小"
"0","    legend.title = element_text(size = 20),           # 图例标题字体大小"
"0","    axis.text.y = element_text(size = 20),            # Y轴刻度字体大小"
"0","    legend.position = ""top"""
"0","  )"
